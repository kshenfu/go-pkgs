(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{166:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._m(7),t._v(" "),t._m(8),t._m(9),t._v(" "),t._m(10),t._m(11),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),n("p",[t._v("例如：")]),t._v(" "),t._m(15),t._m(16),t._v(" "),t._m(17),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._m(22),t._v(" "),n("p",[n("code",[t._v("Request")]),t._v("是对HTTP的封装，包括作为服务器接收到的请求以及作为客户端发出的请求。相关的字段可以参看"),n("a",{attrs:{href:"https://golang.org/pkg/net/http/#Request",target:"_blank",rel:"noopener noreferrer"}},[t._v("http.Request"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("p",[t._v("作为客户端发出的请求时，有以下方法：")]),t._v(" "),t._m(23),t._v(" "),n("p",[t._v("作为服务器接收的请求时，有以下方法：")]),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),n("p",[t._v("执行：")]),t._v(" "),t._m(27),n("p",[t._v("输出为：")]),t._v(" "),t._m(28),t._m(29),t._v(" "),n("p",[t._v("当作为客户端发请求时，服务器的返回就是一个"),n("code",[t._v("Response")]),t._v("。具体字段可以参看"),n("a",{attrs:{href:"https://golang.org/pkg/net/http/#Response",target:"_blank",rel:"noopener noreferrer"}},[t._v("http.Response"),n("OutboundLink")],1),t._v("。")]),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),n("p",[t._v("例如：")]),t._v(" "),t._m(32),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),t._v(" "),t._m(39),t._m(40),t._v(" "),t._m(41),t._v(" "),t._m(42),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),t._m(46),t._v(" "),t._m(47),t._v(" "),t._m(48),t._v(" "),n("p",[t._v("有如下方法：")]),t._v(" "),t._m(49),t._v(" "),t._m(50)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"net-http"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#net-http","aria-hidden":"true"}},[this._v("#")]),this._v(" net/http")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"辅助方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#辅助方法","aria-hidden":"true"}},[this._v("#")]),this._v(" 辅助方法")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"canonicalheaderkey"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#canonicalheaderkey","aria-hidden":"true"}},[this._v("#")]),this._v(" CanonicalHeaderKey")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("与"),s("code",[this._v("textproto.CanonicalMIMEHeaderKey")]),this._v("效果相同。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"handler-和-handlerfunc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#handler-和-handlerfunc","aria-hidden":"true"}},[this._v("#")]),this._v(" Handler 和 HandlerFunc")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("Handler")]),this._v("是一个"),s("code",[this._v("interface")]),this._v("：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("type")]),t._v(" Handler "),n("span",{attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("ServeHTTP")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ResponseWriter"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("Request"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("HandlerFunc")]),this._v("是一类函数，它的参数列表与"),s("code",[this._v("Handler")]),this._v("的"),s("code",[this._v("ServeHTTP")]),this._v("方法的参数列表相同：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("type")]),t._v(" HandlerFunc "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ResponseWriter"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("Request"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("并且它实现了"),s("code",[this._v("ServeHTTP")]),this._v("方法：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("f HandlerFunc"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("ServeHTTP")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("w ResponseWriter"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" r "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("Request"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("f")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("w"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" r"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("因此，"),s("code",[this._v("HandlerFunc")]),this._v("的主要作用就是将一个普通函数包装成一个"),s("code",[this._v("Handler")]),this._v("：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" f "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("w http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ResponseWriter"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" r "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Request"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" g "),n("span",{attrs:{class:"token keyword"}},[t._v("interface")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("HandlerFunc")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("f"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token boolean"}},[t._v("_")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ok "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" g"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Handler"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nfmt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Println")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ok"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"cookie-和-cookiejar"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cookie-和-cookiejar","aria-hidden":"true"}},[this._v("#")]),this._v(" Cookie 和 CookieJar")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// This implementation is done according to RFC 6265:")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("//")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("//    http://tools.ietf.org/html/rfc6265")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("// A Cookie represents an HTTP cookie as sent in the Set-Cookie header of an")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// HTTP response or the Cookie header of an HTTP request.")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("type")]),t._v(" Cookie "),n("span",{attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Name       "),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n    Value      "),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n    Path       "),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n    Domain     "),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n    Expires    time"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Time\n    RawExpires "),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// MaxAge=0 means no 'Max-Age' attribute specified.")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// MaxAge<0 means delete cookie now, equivalently 'Max-Age: 0'")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// MaxAge>0 means Max-Age attribute present and given in seconds")]),t._v("\n    MaxAge   "),n("span",{attrs:{class:"token builtin"}},[t._v("int")]),t._v("\n    Secure   "),n("span",{attrs:{class:"token builtin"}},[t._v("bool")]),t._v("\n    HttpOnly "),n("span",{attrs:{class:"token builtin"}},[t._v("bool")]),t._v("\n    Raw      "),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n    Unparsed "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// Raw text of unparsed attribute-value pairs")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[t._v("c "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Cookie"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Name"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("   "),n("span",{attrs:{class:"token string"}},[t._v('"token"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Value"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  "),n("span",{attrs:{class:"token string"}},[t._v('"abcd1234"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Path"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("   "),n("span",{attrs:{class:"token string"}},[t._v('"/"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    MaxAge"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("3600")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nfmt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Println")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("String")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v('// "token=abcd1234; Path=/; Max-Age=3600"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("CookieJar")]),this._v("是一个接口：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// A CookieJar manages storage and use of cookies in HTTP requests.")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("//")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// Implementations of CookieJar must be safe for concurrent use by multiple")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// goroutines.")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("//")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// The net/http/cookiejar package provides a CookieJar implementation.")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("type")]),t._v(" CookieJar "),n("span",{attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// SetCookies handles the receipt of the cookies in a reply for the")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// given URL.  It may or may not choose to save the cookies, depending")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// on the jar's policy and implementation.")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("SetCookies")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("url"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("URL"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cookies "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("Cookie"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// Cookies returns the cookies to send in a request for the given URL.")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// It is up to the implementation to honor the standard cookie use")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// restrictions such as in RFC 6265.")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("Cookies")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("url"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("URL"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("Cookie\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("net/http/cookiejar")]),this._v("提供了一个具体的实现。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"header"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#header","aria-hidden":"true"}},[this._v("#")]),this._v(" Header")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("与"),n("code",[t._v("textproto.MIMEHeader")]),t._v("类似，本质上也是一个"),n("code",[t._v("map[string][]string")]),t._v("。同样拥有"),n("code",[t._v("Add")]),t._v("，"),n("code",[t._v("Set")]),t._v("，"),n("code",[t._v("Get")]),t._v("，"),n("code",[t._v("Del")]),t._v("方法，此外还有"),n("code",[t._v("Write")]),t._v("和"),n("code",[t._v("WriteSubset")]),t._v("方法。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[t._v("h "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Header"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nh"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Set")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"Content-Type"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"application/json"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nh"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Add")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"Accept-Encoding"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"gzip"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nh"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Add")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"Accept-Encoding"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"deflate"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nh"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Set")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"Cache-Control"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"no-cache"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nh"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Write")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Stdout"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// Accept-Encoding: gzip")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// Accept-Encoding: deflate")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// Cache-Control: no-cache")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// Content-Type: application/json")]),t._v("\n\nh"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("WriteSubset")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Stdout"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("map")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token builtin"}},[t._v("string")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token builtin"}},[t._v("bool")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token string"}},[t._v('"Accept-Encoding"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// Cache-Control: no-cache")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// Content-Type: application/json")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"request"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#request","aria-hidden":"true"}},[this._v("#")]),this._v(" Request")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("AddCookie(c *Cookie)")]),this._v(" "),s("li",[this._v("SetBasicAuth(username, password string)")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[t._v("BasicAuth() (username, password string, ok bool)")]),t._v(" "),n("li",[t._v("Cookie(name string) (*Cookie, error)")]),t._v(" "),n("li",[t._v("Cookies() []*Cookie")]),t._v(" "),n("li",[t._v("FormFile(key string) (multipart.File, *multipart.FileHeader, error)")]),t._v(" "),n("li",[t._v("FormValue(key string) string")]),t._v(" "),n("li",[t._v("PostFormValue(key string) string")]),t._v(" "),n("li",[t._v("Referer() string")]),t._v(" "),n("li",[t._v("UserAgent() string")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("为了获取表单的参数值，需要先调用"),s("code",[this._v("ParseForm")]),this._v("或者"),s("code",[this._v("ParseMultipartForm")]),this._v("，例如：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[t._v("http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("HandleFunc")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"/"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("func")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("w http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ResponseWriter"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" r "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Request"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    r"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("ParseForm")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    fmt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Println")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"UserAgent:"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" r"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("UserAgent")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    fmt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Println")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Form"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    fmt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Println")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PostForm"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    w"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Write")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token function"}},[t._v("byte")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"hello world"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nhttp"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("ListenAndServe")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('":8080"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("nil")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('curl -X POST -d "hello=world" "localhost:8080/?a=b&c=d"\n')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("UserAgent: curl/7.51.0\nmap[hello:[world] a:[b] c:[d]]\nmap[hello:[world]]\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"response"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#response","aria-hidden":"true"}},[this._v("#")]),this._v(" Response")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("以下几个HTTP方法都可以得到一个"),s("code",[this._v("Response")]),this._v("：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("Get(url string) (resp *Response, err error)")]),this._v(" "),s("li",[this._v("Head(url string) (resp *Response, err error)")]),this._v(" "),s("li",[this._v("Post(url string, contentType string, body io.Reader) (resp *Response, err error)")]),this._v(" "),s("li",[this._v("PostForm(url string, data url.Values) (resp *Response, err error)")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[t._v("resp"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Get")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"https://httpbin.org/user-agent"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),n("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    fmt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Println")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("defer")]),t._v(" resp"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Body"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Close")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nbody"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" ioutil"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("ReadAll")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resp"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Body"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nfmt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Println")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token function"}},[t._v("string")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("body"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v('// { "user-agent": "Go-http-client/1.1" }')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"client"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#client","aria-hidden":"true"}},[this._v("#")]),this._v(" Client")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("Client")]),this._v("作为客户端发请求。有如下方法：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[t._v("func (c *Client) Do(req *Request) (*Response, error)")]),t._v(" "),n("li",[t._v("func (c *Client) Get(url string) (resp *Response, err error)")]),t._v(" "),n("li",[t._v("func (c *Client) Head(url string) (resp *Response, err error)")]),t._v(" "),n("li",[t._v("func (c *Client) Post(url string, contentType string, body io.Reader) (resp *Response, err error)")]),t._v(" "),n("li",[t._v("func (c *Client) PostForm(url string, data url.Values) (resp *Response, err error)")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("事实上，"),n("code",[t._v("Get")]),t._v("，"),n("code",[t._v("Head")]),t._v("，"),n("code",[t._v("Post")]),t._v("，"),n("code",[t._v("PostForm")]),t._v("都是构建好"),n("code",[t._v("Request")]),t._v("对象后，调用"),n("code",[t._v("Do")]),t._v("方法。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("有一个全局的"),n("code",[t._v("DefaultClient")]),t._v("对象，全局的"),n("code",[t._v("Get")]),t._v("，"),n("code",[t._v("Head")]),t._v("，"),n("code",[t._v("Post")]),t._v("，"),n("code",[t._v("PostForm")]),t._v("其实是调用了"),n("code",[t._v("DefaultClient")]),t._v("的相应方法。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果只是发送简单的请求，直接用"),s("code",[this._v("http.Get")]),this._v("等这些方法就可以了，如果需要定制header等行为，则需要显式使用"),s("code",[this._v("client.Do(req)")]),this._v("，例如：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[t._v("client "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Client"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    CheckRedirect"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" redirectPolicyFunc"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nresp"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" client"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Get")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"http://example.com"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\nreq"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("NewRequest")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"GET"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"http://example.com"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("nil")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\nreq"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Header"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Add")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"If-None-Match"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('`W/"wyzzy"`')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nresp"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" client"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Do")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"transport"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transport","aria-hidden":"true"}},[this._v("#")]),this._v(" Transport")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("Transport")]),this._v("是比"),s("code",[this._v("Client")]),this._v("更底层的东西，如果需要控制proxy等更具体的行为，需要使用"),s("code",[this._v("Transport")]),this._v("，例如：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[t._v("tr "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Transport"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    MaxIdleConns"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("       "),n("span",{attrs:{class:"token number"}},[t._v("10")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    IdleConnTimeout"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("    "),n("span",{attrs:{class:"token number"}},[t._v("30")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" time"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Second"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    DisableCompression"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nclient "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("http"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Client"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Transport"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" tr"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nresp"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),n("span",{attrs:{class:"token operator"}},[t._v(":=")]),t._v(" client"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Get")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"https://example.com"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"responsewriter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#responsewriter","aria-hidden":"true"}},[this._v("#")]),this._v(" ResponseWriter")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("当作为服务器时，接收到请求后会进行处理，然后发送回复。"),s("code",[this._v("ResponseWriter")]),this._v("是一个接口，就是对服务器回复的抽象。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("type")]),t._v(" ResponseWriter "),n("span",{attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("Header")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Header\n\n    "),n("span",{attrs:{class:"token function"}},[t._v("Write")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token builtin"}},[t._v("byte")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token builtin"}},[t._v("int")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token builtin"}},[t._v("error")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{attrs:{class:"token function"}},[t._v("WriteHeader")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token builtin"}},[t._v("int")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"servemux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#servemux","aria-hidden":"true"}},[this._v("#")]),this._v(" ServeMux")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("可以认为"),s("code",[this._v("ServeMux")]),this._v("是一个简单的路由器，当接收到请求时，它会将请求分发给相应的"),s("code",[this._v("Handler")]),this._v("来处理。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("通过"),n("code",[t._v("NewServeMux()")]),t._v("可以创建一个新的"),n("code",[t._v("ServeMux")]),t._v("。有一个全局的默认"),n("code",[t._v("ServeMux")]),t._v("："),n("code",[t._v("DefaultServeMux")]),t._v("。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[t._v("Handle(pattern string, handler Handler)：注册Handler")]),t._v(" "),n("li",[t._v("HandleFunc(pattern string, handler func(ResponseWriter, *Request))：注册处理函数")]),t._v(" "),n("li",[t._v("Handler(r *Request) (h Handler, pattern string)：返回响应request对象应该使用的Handler")]),t._v(" "),n("li",[t._v("ServeHTTP(w ResponseWriter, r *Request)：实现了该方法，因此ServeMux本身也是Handler，该方法先调用"),n("code",[t._v("Handler(r *Request)")]),t._v("得到应当使用的Handler，然后调用该Handler的ServeHTTP方法")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("全局的"),s("code",[this._v("Handle")]),this._v("和"),s("code",[this._v("HandleFunc")]),this._v("方法分别调用了"),s("code",[this._v("DefaultServeMux")]),this._v("的相应方法。")])}],!1,null,null,null);e.options.__file="http.md";s.default=e.exports}}]);